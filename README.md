# ๐ ูุดุฑูุน "ุงููุต": ูุธุงู ูุชูุงูู ูุงุณุชุฎุฑุงุฌ ูุชุญููู ุงููุตูุต ุงูุนุฑุจูุฉ (Al-Nass Extractor)

**ุงูุฅุตุฏุงุฑ:** 1.0.0
**ุงูุฏูุฑ:** ุชูุซูู ูุนูุงุฑู ูุชููู ูููุทูุฑูู

---

## 1. ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน (Project Overview)

### ููุฎุต ุฑููุน ุงููุณุชูู
ูุนุฏ ูุดุฑูุน **Al-Nass Extractor** ููุตุฉ ูุชุทูุฑุฉ ูุจููุฉ ุจูุบุฉ **TypeScript** ูุฅุทุงุฑ ุนูู **React**ุ ูุตููุฉ ุฎุตูุตุงู ููุนุงูุฌุฉ ุงููุตูุต ุงูุนุฑุจูุฉ ุงูุฃุฏุจูุฉ ูุงููุนูุฏุฉ. ูููู ุงููุธุงู ุจุชุญููู ุงูุจูุงูุงุช ุบูุฑ ุงููููููุฉ (ูุซู ุงูุตูุฑ ููููุงุช PDF) ุฅูู ุจูุงูุงุช ูููููุฉ ุบููุฉ ุฏูุงููุงู ูุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ูู ุชุทุจููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุชูุฏูุฉ ูุซู ุฃูุธูุฉ ุชูููุฏ ุงููุตูุต ุงููุนุฒุฒ ุจุงูุงุณุชุฑุฌุงุน (RAG) ุฃู ุชุฏุฑูุจ ุงูููุงุฐุฌ ุงููุบููุฉ.

### ุงููุฏุฑุงุช ุงูุฌููุฑูุฉ
*   **ุงุณุชุฎุฑุงุฌ ุงููุตูุต (OCR):** ูุญุฑู ูุฌูู ูุนุชูุฏ ุนูู **Google Gemini** ููุฑุคูุฉ ุงูุญุงุณูุจูุฉ ูุน ูุนุงูุฌุฉ ูุญููุฉ ููููุงุช PDF ุงููุตูุฉ.
*   **ุงูุชุญููู ุงูููููู (Structural Parsing):** ุฎูุงุฑุฒููุฉ ุฐููุฉ ููุชูููุฒ ุจูู ุงูุณุฑุฏุ ุงูุญูุงุฑุ ุงูุดุนุฑุ ูุงููุตูุต ุงููุฑุขููุฉ.
*   **ุงูุชุฌุฒุฆุฉ ุงูุฏูุงููุฉ (Semantic Chunking):** ุชูุณูู ุงููุตูุต ุชูุฑุงุฑูุงู ุจูุงุกู ุนูู ุนุฏุฏ ุงูุฑููุฒ (Tokens) ูุน ุงูุญูุงุธ ุนูู ุณูุงู ุงููุบุฉ ุงูุนุฑุจูุฉ.
*   **ุงูุฅุซุฑุงุก ูุงูุชุตููู (AI Enrichment):** ุชุตููู ุงูููุฌุงุชุ ุชุญููู ุงููุดุงุนุฑุ ูุชูููุฏ ุฃุฒูุงุฌ (ุณุคุงู/ุฌูุงุจ) ุขููุงู.
*   **ุงูููุฑุณุฉ ุงููุชุฌูุฉ (Vector Indexing):** ุชูุงูู ูุจุงุดุฑ ูุน **Qdrant** ูุชุฎุฒูู ูุงุณุชุฑุฌุงุน ุงููุชุฌูุงุช ุงูุฏูุงููุฉ.

### ุงูุญุฒูุฉ ุงูุชูููุฉ (Tech Stack)
*   **ุงููุบุฉ ุงูุฃุณุงุณูุฉ:** TypeScript (Strict Mode).
*   **ุฅุทุงุฑ ุงูุนูู:** React 19 + Vite.
*   **ูุญุฑูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู:** Google GenAI (Gemini), Anthropic SDK (Claude), HuggingFace Inference.
*   **ุงููุนุงูุฌุฉ ุงููุญููุฉ:** `pdfjs-dist` ูุงุณุชุฎุฑุงุฌ ูุตูุต PDFุ ู `js-tiktoken` ูุญุณุงุจ ุงูุชูููุฒ.
*   **ููุงุนุฏ ุงูุจูุงูุงุช:** Qdrant (Vector Database).

---

## 2. ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ูุงูุชุตููู (Architecture & Design)

### ุชุญููู ุงููููู ุงูููุญุฏ
ูุนุชูุฏ ุงููุธุงู ุนูู ุจููุฉ **ุฎุท ุงูุฅูุชุงุฌ ุงููุชุณูุณู (Pipeline Architecture)**ุ ุญูุซ ุชูุฑ ุงูุจูุงูุงุช ุจุฎูุณ ูุฑุงุญู ุฃุณุงุณูุฉ. ูุชู ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State) ุจุดูู ูุฑูุฒู ูู ุงููููู `App.tsx` ูุถูุงู ุชุฏูู ุงูุจูุงูุงุช ุจุณูุงุณุฉ ุจูู ุงูููููุงุช.

### ุงููุฎุทุท ุงูุงูุณูุงุจู ููููุทู (Logic Flow)

```mermaid
graph TD
    A[ุงูููู ุงููุฏุฎู: PDF/Image] --> B{ููุน ุงููููุ}
    B -- PDF ูุตู --> C[ุงุณุชุฎุฑุงุฌ ูุญูู ุนุจุฑ PDF.js]
    B -- ุตูุฑุฉ/PDF ููุณูุญ --> D[Gemini Vision OCR]
    C & D --> E[ุชูุธูู ุงููุต: ุฅุฒุงูุฉ ุงูุชุดููู/ุงูุชุทููู]
    E --> F[ุงููุญูู ุงูููููู: ุชุญุฏูุฏ ุงููุตูู/ุงูุญูุงุฑ/ุงูุดุนุฑ]
    F --> G[ุงููุฌุฒุฆ ุงูุฏูุงูู: ุชูุณูู ุฅูู Chunks]
    G --> H[ุงููุตูู ุงูุฐูู: ููุฌุงุช/ูุดุงุนุฑ/ุฅุซุฑุงุก]
    H --> I[ูุงุนุฏุฉ ุจูุงูุงุช Qdrant / ุชุตุฏูุฑ JSON]
```

### ุฃููุงุท ุงูุชุตููู ุงููุณุชุฎุฏูุฉ (Design Patterns)
1.  **Singleton Pattern:** ูุณุชุฎุฏู ูู `TokenizerService` ู `ConfigManager` ูุถูุงู ูุฌูุฏ ูุณุฎุฉ ูุงุญุฏุฉ ููุท ูู ูุญุฑู ุญุณุงุจ ุงูุชูููุฒ ูุงูุฅุนุฏุงุฏุงุช.
2.  **Facade Pattern:** ุงููุชูุซู ูู `ChunkingProcessor` ุงูุฐู ูุฎูู ุชุนููุฏุงุช ุงูุชุฌุฒุฆุฉ ุฎูู ูุงุฌูุฉ ุจุณูุทุฉ.
3.  **Strategy Pattern:** ูู `IndexingService` ููุชุจุฏูู ุจูู ูุฒูุฏู ุฎุฏูุฉ Embedding (OpenAI vs HuggingFace).

---

## 3. ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ (Installation & Setup)

### ุงููุชุทูุจุงุช ุงููุณุจูุฉ
*   Node.js (ุงูุฅุตุฏุงุฑ 22 ุฃู ุฃุญุฏุซ).
*   ููุชุงุญ API ูู Google Gemini.
*   (ุงุฎุชูุงุฑู) ููุงุชูุญ API ูู HuggingFace ู Anthropic ููููุฒุงุช ุงููุชูุฏูุฉ.

### ุฎุทูุงุช ุงูุชุซุจูุช
1.  ุชุญููู ุงูุชุจุนูุงุช:
    ```bash
    npm install
    ```
2.  ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ: ูู ุจุฅูุดุงุก ููู `.env` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู:
    ```env
    VITE_GEMINI_API_KEY=your_gemini_key
    # ููููุฒุงุช ุงููุชูุฏูุฉ
    VITE_HF_API_KEY=your_huggingface_key
    VITE_ANTHROPIC_API_KEY=your_anthropic_key
    ```
3.  ุชุดุบูู ุจูุฆุฉ ุงูุชุทููุฑ:
    ```bash
    npm run dev
    ```

---

## 4. ุฏููู ุงูุงุณุชุฎุฏุงู (Usage Guide)

### ุงููุฑุญูุฉ ุงูุฃููู: ุงูุงุณุชุฎุฑุงุฌ
ูู ุจุฑูุน ุงููููุงุช ูู "ููุทูุฉ ุงูุฑูุน". ููููู ุถุจุท ุฅุนุฏุงุฏุงุช ุงูุชูุธูู ูุซู "ุฅุฒุงูุฉ ุงูุชุดููู" ุฃู ุชูุนูู ูุถุน `Agentic Plus` ูููุซุงุฆู ุฐุงุช ุงูุชุฎุทูุทุงุช ุงููุนูุฏุฉ (ุฃุนูุฏุฉุ ุฌุฏุงูู).

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงูุชุญููู ุงูููููู
ุจุนุฏ ุงูุงุณุชุฎุฑุงุฌุ ุงูุชูู ูุชุจููุจ "ุงูุชุญููู". ุณูููู ุงููุธุงู ุชููุงุฆูุงู ุจุชูุณูู ุงููุต ุฅูู ูุตูู. ููููู ูุฑุงุฌุนุฉ ุงูุฅุญุตุงุฆูุงุช ูุซู "ูุณุจุฉ ุงูุญูุงุฑ" ููุงุจู "ุงูุณุฑุฏ".

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ: ุงูุชูุทูุน ูุงูููุฑุณุฉ
ูู ุจุชุญุฏูุฏ `Chunk Size` (ุญุฌู ุงูููุทุน)ุ ุซู ุงุถุบุท "ุจุฏุก ุงูุชูุทูุน". ุงููุชุงุฆุฌ ุณุชููู ุฌุงูุฒุฉ ููุฅุฑุณุงู ุฅูู Qdrant ุนุจุฑ ุชุจููุจ "ุงูููุฑุณุฉ" ููุจุญุซ ุงูุฏูุงูู ูุงุญูุงู.

---

## 5. ูููููุฉ ุงูููุฏ ููุฑุฌุน ุงููุงุฌูุฉ ุงูุจุฑูุฌูุฉ (API Reference)

### ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ (Core Services)

#### 1. `ParsingService`
**ุงูุบุฑุถ:** ุชุญููู ุจููุฉ ุงูุฑูุงูุฉ ูุชูุณูููุง ุฏูุงููุงู.
*   **Signature:** `static async parseNovel(source: string | Blob, fileName: string, config: ParserConfig): Promise<NovelStructure>`
*   **ุงูููุทู ุงูุฏุงุฎูู:** ูุณุชุฎุฏู `Async Generators` ููุนุงูุฌุฉ ุงููุตูุต ุงูุถุฎูุฉ ุณุทุฑุงู ุจุณุทุฑ ูุชูููุฑ ุงุณุชููุงู ุงูุฐุงูุฑุฉ.

#### 2. `RecursiveArabicSplitter`
**ุงูุบุฑุถ:** ุชูุณูู ุงููุต ุงูุนุฑุจู ุชูุฑุงุฑูุงู ุจูุงุกู ุนูู ุงูุฑููุฒ.
| ุงูุจุงุฑุงูุชุฑ | ุงูููุน | ุงููุตู |
| :--- | :--- | :--- |
| `text` | `string` | ุงููุต ุงููุฑุงุฏ ุชูุทูุนู. |
| `limit` | `number` | ุงูุญุฏ ุงูุฃูุตู ููุชูููุฒ ูู ุงูููุทุน ุงููุงุญุฏ. |

#### 3. `IndexerPipeline`
**ุงูุบุฑุถ:** ุฅุฏุงุฑุฉ ุนูููุฉ ุงูุชุถููู (Embedding) ูุงูุฑูุน ุฅูู Qdrant.
*   **Handling Edge Cases:** ูุชุถูู ูุญุฑู ุฅุนุงุฏุฉ ุงููุญุงููุฉ `RetryHandler` ูุน ุฎุงุตูุฉ `Exponential Backoff` ููุชุนุงูู ูุน ุฃุฎุทุงุก ุงูุดุจูุฉ ุฃู ุญุฏูุฏ ุงูุงุณุชุฎุฏุงู (Rate Limits).

### ุชุนุฑููุงุช ุงูุฃููุงุน ุงููุงูุฉ (Types)
```typescript
export interface NovelStructure {
  novel_metadata: NovelMetadata; // ุงูุนููุงูุ ุงููุคููุ ุชุงุฑูุฎ ุงููุนุงูุฌุฉ
  chapters: Chapter[];           // ูุงุฆูุฉ ุงููุตูู ูุงูููุงุทุน
  statistics: NovelStatistics;   // ูุณุจ ุงูุณุฑุฏุ ุงูุญูุงุฑุ ุนุฏุฏ ุฃุจูุงุช ุงูุดุนุฑ
}

export interface EnrichedChunk {
  chunk_id: number;
  text: string;
  fast_labels: FastLabels;       // ุงูููุฌุฉุ ุงููุดุงุนุฑุ ุฌูุณ ุงููุชุญุฏุซ
  llm_augmentation: LLMAugmentation | null; // Q&Aุ ุงูุชุนูููุ ุงุณุชุฎุฑุงุฌ ุงูููุงูุงุช
}
```

---

## 6. ุงูุฎุงุชูุฉ (Conclusion)

ูุดุฑูุน **Al-Nass Extractor** ููุณ ูุฌุฑุฏ ุฃุฏุงุฉ OCRุ ุจู ูู ุจูุฆุฉ ูุนุงูุฌุฉ ูุบููุฉ ูุชูุงููุฉ (NLP Suite) ูุฎุตุตุฉ ููุบุฉ ุงูุนุฑุจูุฉ. ุจูุถู ุจููุฉ ุงูุฎุฏูุงุช ุงููุณุชููุฉ (Modular Services) ูุชูุงูููุง ูุน ุชูููุงุช Vector DBุ ูููุฑ ุงููุดุฑูุน ุฃุณุงุณุงู ุตูุจุงู ูุจูุงุก ุชุทุจููุงุช "ุงูุฏุฑุฏุดุฉ ูุน ุงููุชุจ ุงูุนุฑุจูุฉ" ุฃู ุฃูุธูุฉ ุงูุฃุฑุดูุฉ ุงูุฐููุฉ.

**ุงูุฎุทูุงุช ุงูุชุงููุฉ ูููุทูุฑูู:**
*   ุชูุณูุน ููุงุนุฏ `RuleBasedClassifier` ูุชุดูู ุชุตูููุงุช ุฃุฏุจูุฉ ุฃูุซุฑ ุฏูุฉ.
*   ุชุทููุฑ ูุงุฌูุฉ ูุณุชุฎุฏู ูุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ูุงูุจุญุซ ุงูุฏูุงูู (RAG UI).
*   ููู ุนูููุงุช ุงูู API ุงูุญุณุงุณุฉ ุฅูู ูุณูุท ุจุฑูุฌูุงุช (Backend Proxy) ูุชุนุฒูุฒ ุงูุฃูุงู.